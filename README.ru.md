# Загрузчик плейлистов Apple Music

Инструмент для загрузки плейлистов Apple Music с YouTube с полными метаданными.

## Описание

Этот проект помогает загрузить ваши плейлисты Apple Music в виде MP3-файлов с полными метаданными. Работа происходит в два этапа:

1. **Санитизация** - Очистка экспортированных файлов плейлистов Apple Music в стандартизированный CSV формат
2. **Загрузка** - Загрузка треков с YouTube и добавление ID3 метаданных

## Требования

- Python 3.x
- Зависимости (установка через `pip install -r requirements.txt`):
  - `pandas` - Обработка данных
  - `mutagen` - Редактирование MP3 метаданных
- **yt-dlp** - Загрузчик с YouTube (установить отдельно: `pip install yt-dlp`)

## Установка

```bash
pip install -r requirements.txt
pip install yt-dlp
```

## Использование

### Этап 1: Санитизация экспорта плейлиста

Экспортируйте ваш плейлист из Apple Music в `.txt` файл, затем выполните:

```bash
python app.py
```

Скрипт:
- Покажет все `.txt` файлы в текущей директории
- Предложит выбрать файл
- Извлечет колонки: Название, Артист, Автор, Альбом, Группа, Жанр, Год
- Создаст чистый CSV файл с суффиксом `_clean.csv`

**Поддерживаемые форматы**: Текстовые файлы с разделителями-табуляциями в кодировке UTF-8 или UTF-16

### Этап 2: Загрузка треков

```bash
python download.py
```

Скрипт:
- Покажет все CSV файлы в текущей директории
- Предложит выбрать файл санитизированного плейлиста
- Создаст директорию `downloads/<имя_плейлиста>/`
- Загрузит каждый трек с YouTube в формате MP3
- Добавит ID3 метаданные (название, артист, альбом, жанр, год)
- Пропустит уже загруженные файлы
- Использует случайные задержки 5-10 секунд между загрузками

**Формат выходных файлов**: `Артист - Название.mp3`

## Структура проекта

```
.
├── app.py              # Этап 1: Санитизация плейлистов
├── download.py         # Этап 2: Загрузка треков
├── requirements.txt    # Зависимости Python
├── downloads/          # Загруженные MP3 файлы (создаётся автоматически)
│   └── <имя_плейлиста>/
└── *.txt              # Ваши экспорты из Apple Music
```

## Возможности

- Обработка файлов плейлистов в кодировке UTF-8 и UTF-16
- Санитизация имён файлов (удаление недопустимых символов: `\/:*?"<>|`)
- Сохранение полных метаданных: название, артист, альбом, жанр, год
- Пропуск уже загруженных треков
- Ограничение скорости со случайными задержками (5-10 секунд)
- Загрузка первого результата поиска YouTube для каждого трека

## Примечания

- Сообщения интерфейса на русском языке
- CSV файлы используют точку с запятой (`;`) в качестве разделителя
- Кодировка выходных файлов UTF-8 с BOM (UTF-8-sig)

## Лицензия

Этот проект предназначен для личного использования. Соблюдайте законы об авторском праве при загрузке музыки.
